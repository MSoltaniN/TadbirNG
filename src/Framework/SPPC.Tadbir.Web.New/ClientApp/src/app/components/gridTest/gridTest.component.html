<app-bread-cumb [entityTypeName]="entityTypeName"></app-bread-cumb>
<div class="panel-body">
  <kendo-grid id="2" #GridID [ngClass]="{'tRtl':this.currentlang === 'fa' , 'tLtr': this.currentlang === 'en'}"
              [data]="rowData"
              [sortable]="{ allowUnsort: true, mode: 'multiple' }"
              [sort]="sort"
              [pageSize]="pageSize"
              [skip]="skip"
              [filter]="state.filter"
              [pageable]="true"
              [resizable]="true"
              [filterable]="true"
              [scrollable]="'none'"
              (pageChange)="pageChange($event)"
              (sortChange)="sortChange($event)"
              (edit)="editHandler($event)"
              (remove)="removeHandler($event)"
              [loading]="true"
              [selectable]="{ checkboxOnly: true, mode: 'multiple' }"
              [selectedKeys]="selectedRows"
              [kendoGridSelectBy]="selectionKey"
              (filterChange)="filterChange($event)"
              (selectedKeysChange)="onSelectedKeysChange($event)"
              sppc-grid-reorder sppc-grid-resize>
    <kendo-grid-messages pagerPage="{{ 'Paging.Record' | translate }}"
                         pagerOf="{{ 'Paging.Of' | translate }}"
                         pagerItems="{{ 'Paging.Record' | translate }}">
    </kendo-grid-messages>
    <ng-template kendoGridNoRecordsTemplate>
      {{ showloadingMessage  ? ('App.Loading' | translate) : ('App.RecordNotFound' | translate) }}
    </ng-template>
    <ng-template kendoGridToolbarTemplate>

      <button (click)="changeEntity()">Change Entity</button>

      <button kendoGridAddCommand (click)="addNew()" [icon]="'file-add'" type="button" title="{{ 'Voucher.New' | translate }}"></button>

      <button (click)="editHandler()" class="k-button k-button-icon" [disabled]="selectedRows.length != 1" title="{{ 'Buttons.Edit' | translate }}"><span class="k-icon k-i-pencil"></span></button>
      <button (click)="removeHandler()" class="k-button k-button-icon" [disabled]="selectedRows.length == 0" title="{{ 'Buttons.Delete' | translate }}"><span class="k-icon k-i-delete"></span></button>

      <auto-generated-grid-setting [metadataType]="metadataType"
                                   [entityTypeName]="entityTypeName"
                                   [metadataUrlType]="metadataUrlType"
                                   (columnsList)="getColumns($event)">
      </auto-generated-grid-setting>

      <grid-filter *ngIf="this.grid.filterable" [parentComponent]="this" [showClearFilter]="this.grid.filter.filters.length"></grid-filter>

    </ng-template>

    <kendo-grid-checkbox-column showSelectAll="true" width="40"></kendo-grid-checkbox-column>


    <kendo-grid-column media="(max-width: 450px)" title="">
      <ng-template kendoGridCellTemplate let-dataItem>
        <dl>
          <ng-template  ngFor let-item [ngForOf]="gridColumns" let-i="index">
            <dt>{{ getColumnTitle(item.name) }}:</dt>
            <dd *ngIf="item.scriptType != 'Date'" class="dl-value">{{ getRowValue(item.name,dataItem,item.scriptType)  }}</dd>
            <dd *ngIf="item.scriptType == 'Date'" class="dl-value">{{ getRowValue(item.name,dataItem,item.scriptType) | SppcDate }}</dd>
          </ng-template>
        </dl>

        <button kendoGridAddCommand (click)="addNew(account.id)" type="button">{{ 'Buttons.New' | translate }}</button>
      </ng-template>
    </kendo-grid-column>

    <kendo-grid-column media="(min-width: 450px)" *ngFor="let item of gridColumns" sppc-grid-column="{{ entityTypeName }}.{{ item.name }}">
      <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
        <sppc-grid-filter [metaData]="getMetaData(item.name)" [column]="column" [filter]="filter"></sppc-grid-filter>
      </ng-template>
      <ng-template kendoGridCellTemplate let-dataItem *ngIf="item.scriptType == 'Date'">
        {{ getRowValue(item.name,dataItem,item.scriptType) | SppcDate  }}
      </ng-template>

      <ng-template kendoGridCellTemplate let-dataItem *ngIf="item.scriptType == 'boolean'">
        {{ getRowValue(item.name,dataItem,item.scriptType)  }}
      </ng-template>
    </kendo-grid-column>


  </kendo-grid>


</div>
<kendo-dialog title="{{'Voucher.Delete' | translate}}" *ngIf="deleteConfirm" (close)="deleteModel(false)" [minWidth]="250" [width]="450">
  <p>
    {{ this.deleteConfirmMsg }}
  </p>
  <kendo-dialog-actions>
    <button class="k-button" (click)="deleteModel(true)" primary="true">{{ 'Buttons.Yes' | translate }}</button>
    <button class="k-button" (click)="deleteModel(false)">{{ 'Buttons.No' | translate }}</button>
  </kendo-dialog-actions>
</kendo-dialog>










