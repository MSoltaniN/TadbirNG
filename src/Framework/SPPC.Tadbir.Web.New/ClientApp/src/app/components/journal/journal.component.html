<app-bread-cumb [entityTypeName]="'Journal'"></app-bread-cumb>
<div class="panel-body">
  <kendo-grid id="2" #GridID [ngClass]="{'tRtl':this.currentlang === 'fa' , 'tLtr': this.currentlang === 'en'}"
              [data]="rowData"
              [sortable]="{ allowUnsort: true, mode: 'multiple' }"
              [sort]="sort"
              [pageSize]="pageSize"
              [skip]="skip"
              [filter]="state.filter"
              [pageable]="true"
              [resizable]="true"
              [filterable]="true"
              [scrollable]="'none'"
              (pageChange)="pageChange($event)"
              (sortChange)="sortChange($event)"
              (edit)="editHandler($event)"
              (remove)="removeHandler($event)"
              [loading]="false"
              [selectable]="{ checkboxOnly: true, mode: 'multiple' }"
              [selectedKeys]="selectedRows"
              [kendoGridSelectBy]="selectionKey"
              (filterChange)="filterChange($event)"
              (selectedKeysChange)="onSelectedKeysChange($event)"
              sppc-grid-reorder sppc-grid-resize>
    <kendo-grid-messages pagerPage="{{ 'Paging.Record' | translate }}"
                         pagerOf="{{ 'Paging.Of' | translate }}"
                         pagerItems="{{ 'Paging.Record' | translate }}">
    </kendo-grid-messages>
    <ng-template kendoGridNoRecordsTemplate>
      {{ showloadingMessage  ? ('App.Loading' | translate) : ('App.RecordNotFound' | translate) }}
    </ng-template>
    <ng-template kendoGridToolbarTemplate>

      <div class="journal-type" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa','pull-left':this.CurrentLanguage === 'en'}">
        <input type="radio" name="rdbJournalType" [(ngModel)]="journalType" id="radio1" class="k-radio" value="1" />
        <label class="k-radio-label" for="radio1">{{ 'Journal.ByDate' | translate }}</label>
        <br />
        <input type="radio" name="rdbJournalType" [(ngModel)]="journalType" class="k-radio" id="radio2" value="2" />
        <label class="k-radio-label" for="radio2">{{ 'Journal.ByVoucher' | translate }}</label>
      </div>

      <div [ngClass]="{'pull-right':this.CurrentLanguage === 'fa','pull-left':this.CurrentLanguage === 'en'}">

        <div *ngIf="journalType == '1'">
          <sppc-dateRangeSelector (valueChange)="dateValueChange($event)"></sppc-dateRangeSelector>
        </div>

        <div *ngIf="journalType == '2'">
          <div class="col-xs-12 col-sm-6" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa'}">
            <label class="control-label">{{ 'Journal.FromVoucher' | translate }}</label>
            <input type="text" class="k-textbox" />
          </div>
          <div class="col-xs-12 col-sm-6">
            <label class="control-label">{{ 'Journal.ToVoucher' | translate }}</label>
            <input type="text" class="k-textbox" />
          </div>
        </div>
      </div>

      <auto-generated-grid-setting [metadataType]="metadataType"
                                   [entityTypeName]="entityTypeName"
                                   [metadataUrlType]="metadataUrlType"
                                   (columnsList)="getColumns($event)">
      </auto-generated-grid-setting>
      <grid-filter *ngIf="this.grid.filterable" [parentComponent]="this" [showClearFilter]="this.grid.filter.filters.length"></grid-filter>

    </ng-template>

    <kendo-grid-checkbox-column showSelectAll="true" width="66">
      <ng-template kendoGridFooterTemplate let-column let-columnIndex="columnIndex" *ngIf="totalRecords > 0">
        {{ 'Journal.Sum' | translate }}
      </ng-template>
    </kendo-grid-checkbox-column>


    <kendo-grid-column media="(max-width: 450px)" title="">
      <ng-template kendoGridCellTemplate let-dataItem>
        <dl>
          <ng-template ngFor let-item [ngForOf]="gridColumns" let-i="index">
            <dt>{{ getColumnTitle(item.name) }}:</dt>
            <dd *ngIf="item.type == 'Money'" class="dl-value">{{ getRowValue(item.name,dataItem,item.scriptType) | SppcNumConfig }}</dd>
            <dd *ngIf="item.scriptType != 'Date' && item.type != 'Money'" class="dl-value">{{ getRowValue(item.name,dataItem,item.scriptType) }}</dd>
            <dd *ngIf="item.scriptType == 'Date'" class="dl-value">{{ getRowValue(item.name,dataItem,item.scriptType) | SppcDate }}</dd>
          </ng-template>
        </dl>

      </ng-template>
      <ng-template kendoGridFooterTemplate let-column let-columnIndex="columnIndex" *ngIf="totalRecords > 0">
        <table>
          <tr>
            <td>{{ 'Journal.DebitSum' | translate }}</td>
            <td>{{ debitSum | SppcNumConfig }}</td>
          </tr>
          <tr>
            <td>{{ 'Journal.CreditSum' | translate }}</td>
            <td>{{ creditSum | SppcNumConfig }}</td>
          </tr>
        </table>
      </ng-template>
    </kendo-grid-column>

    <kendo-grid-column media="(min-width: 450px)" *ngFor="let item of gridColumns" sppc-grid-column="{{ entityTypeName }}.{{ item.name }}">

      <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
        <sppc-grid-filter [metaData]="getMetaData(item.name)" [column]="column" [filter]="filter"></sppc-grid-filter>
      </ng-template>

      <ng-template kendoGridCellTemplate let-dataItem *ngIf="item.scriptType == 'Date'">
        {{ getRowValue(item.name,dataItem,item.scriptType) | SppcDate  }}
      </ng-template>

      <ng-template kendoGridCellTemplate let-dataItem *ngIf="item.scriptType == 'boolean'">
        {{ getRowValue(item.name,dataItem,item.scriptType)  }}
      </ng-template>

      <ng-template kendoGridCellTemplate let-dataItem *ngIf="item.type == 'Money'">
        {{ getRowValue(item.name,dataItem,item.type) | SppcNumConfig }}
      </ng-template>

      <ng-template kendoGridFooterTemplate let-column let-columnIndex="columnIndex" *ngIf="totalRecords > 0 && item.name == 'Credit'">
        {{ creditSum | SppcNumConfig }}
      </ng-template>

      <ng-template kendoGridFooterTemplate let-column let-columnIndex="columnIndex" *ngIf="totalRecords > 0 && item.name == 'Debit'">
        {{ debitSum | SppcNumConfig }}
      </ng-template>

    </kendo-grid-column>

  </kendo-grid>

  <div class="section-option">
    <div class="row">
      <div class="col-xs-12 col-sm-4 form-group" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa'}">
        <label class="control-label">{{ 'Journal.DisplayType' | translate }}</label>

        <kendo-dropdownlist [data]="displayType"
                            [textField]="'value'"
                            [valueField]="'key'"
                            [valuePrimitive]="true"
                            [value]="displayTypeSelected"
                            [(ngModel)]="displayTypeSelected">
          <ng-template kendoDropDownListValueTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
          <ng-template kendoDropDownListItemTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
        </kendo-dropdownlist>
      </div>
      <div class="col-xs-12 col-sm-4 form-group" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa'}">
        <label class="control-label">{{ 'Journal.VoucherStatus' | translate }}</label>

        <kendo-dropdownlist [data]="voucherStatus"
                            [textField]="'value'"
                            [valueField]="'key'"
                            [valuePrimitive]="true"
                            [value]="voucherStatusSelected"
                            [(ngModel)]="voucherStatusSelected">
          <ng-template kendoDropDownListValueTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
          <ng-template kendoDropDownListItemTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
        </kendo-dropdownlist>
      </div>
      <div class="col-xs-12 col-sm-4 form-group">
        <label class="control-label">{{ 'Journal.ArticleType' | translate }}</label>

        <kendo-dropdownlist [data]="articleType"
                            [textField]="'value'"
                            [valueField]="'key'"
                            [valuePrimitive]="true"
                            [value]="articleTypeSelected"
                            [(ngModel)]="articleTypeSelected">
          <ng-template kendoDropDownListValueTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
          <ng-template kendoDropDownListItemTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
        </kendo-dropdownlist>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-4 form-group" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa'}">
        <label class="control-label">{{ 'Journal.SelectBranch' | translate }}</label>

        <kendo-dropdownlist [data]="branchScope"
                            [textField]="'value'"
                            [valueField]="'key'"
                            [valuePrimitive]="true"
                            [value]="branchScopeSelected"
                            [(ngModel)]="branchScopeSelected">
          <ng-template kendoDropDownListValueTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
          <ng-template kendoDropDownListItemTemplate let-dataItem>
            {{ dataItem?.value | translate }}
          </ng-template>
        </kendo-dropdownlist>
      </div>
      <div class="col-xs-12 col-sm-4 form-group" [ngClass]="{'pull-right':this.CurrentLanguage === 'fa'}">
        <label class="control-label">{{ 'Journal.BranchSeparation' | translate }}</label>

        <kendo-switch [onLabel]="('Journal.OnLabel' | translate)"
                      [offLabel]="('Journal.OffLabel' | translate)">
        </kendo-switch>
      </div>
      <div class="col-xs-12 col-sm-4 form-group">
        <button class="k-button k-primary" (click)="getReportData()" [ngClass]="{'pull-left':this.CurrentLanguage === 'fa','pull-right':this.CurrentLanguage === 'en'}" style="margin-top: 25px;">
          {{ 'Buttons.Comput' | translate }}
        </button>
      </div>
    </div>

    <div class="clearfix"></div>
  </div>

</div>
