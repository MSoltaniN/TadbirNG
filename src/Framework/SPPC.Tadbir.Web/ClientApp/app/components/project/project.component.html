<div [ngClass]="{'panel panel-primary' : !isChild }">
    <div *ngIf="!isChild" class="panel-heading">{{ 'Entity.Project' | translate }}</div>
    <div [ngClass]="{'panel-body' : !isChild }">
        <kendo-grid [ngClass]="{'tRtl':this.currentlang === 'fa' , 'tLtr': this.currentlang === 'en'}" #GridID [data]="rowData"
                    [sortable]="true"
                    [pageSize]="pageSize"
                    [skip]="skip"
                    [filter]="state.filter"
                    [pageable]="true"
                    [resizable]="true"
                    [filterable]="true"
                    [scrollable]="'none'"
                    (pageChange)="pageChange($event)"
                    (sortChange)="sortChange($event)"
                    (edit)="editHandler($event)"
                    (remove)="removeHandler($event)"
                    [sort]="state.sort"
                    [selectable]="true"
                    [selectedKeys]="selectedRows"
                    [kendoGridSelectBy]="selectionKey"
                    (dataStateChange)="dataStateChange($event)"
                    (selectedKeysChange)="onSelectedKeysChange($event)">
            <kendo-grid-messages pagerPage="{{ 'Paging.Record' | translate }}"
                                 pagerOf="{{ 'Paging.Of' | translate }}"
                                 pagerItems="{{ 'Paging.Record' | translate }}">
            </kendo-grid-messages>
            <ng-template kendoGridNoRecordsTemplate>
                {{viewAccess ? (showloadingMessage  ? ('App.Loading' | translate) : ('App.RecordNotFound' | translate)) : ('App.NotViewAccess' | translate)}}
            </ng-template>
            <ng-template kendoGridToolbarTemplate>
                <button kendoGridAddCommand *ngIf="insertAccess" (click)="addNew()" type="button">{{ 'Project.New' | translate }}</button>
                <button *ngIf="groupDelete && deleteAccess" class="k-button" (click)="deleteProjects()" type="button">{{ 'Buttons.GroupDelete' | translate }}</button>
            </ng-template>

            <!-- template for mobile -->
            <kendo-grid-column media="(max-width: 449px)" title="">
                <ng-template kendoGridCellTemplate let-project>
                    <!-- template for mobile -->
                    <dl>
                        <dt>{{ 'Project.Name' | translate }}</dt>
                        <dd>{{ project.name }}</dd>

                        <dt>{{ 'Project.Code' | translate }}</dt>
                        <dd>{{ project.code }}</dd>

                        <dt>{{ 'Project.FullCode' | translate }}</dt>
                        <dd>{{ project.fullCode }}</dd>

                        <dt>{{ 'Project.Description' | translate  }}</dt>
                        <dd>{{ project.description }}</dd>
                    </dl>
                    <button kendoGridAddCommand *ngIf="insertAccess" (click)="addNew(project.id)" type="button">{{ 'Buttons.New' | translate }}</button>
                    <button kendoGridEditCommand *ngIf="editAccess" class="k-primary">{{ 'Buttons.Edit' | translate }}</button>
                    <button kendoGridRemoveCommand *ngIf="deleteAccess">{{ 'Buttons.Delete' | translate }}</button>
                </ng-template>
            </kendo-grid-column>
            <!-- template for mobile -->
            <!-- template for mid-size devices -->
            <kendo-grid-checkbox-column showSelectAll="true" width="10" media="(min-width: 450px) and (max-width: 1024px)"></kendo-grid-checkbox-column>
            <ng-template kendoGridDetailTemplate let-dataItem
                         [kendoGridDetailTemplateShowIf]="showOnlyParent">
                <div ng-if="dataItem.childCount > 0">
                    <project [isChild]="true" [parent]="dataItem"></project>
                </div>
            </ng-template>
            <kendo-grid-column width="150" media="(min-width: 450px) and (max-width: 1024px)" sppc-grid-column="Project.name">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('name')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column width="150" media="(min-width: 450px) and (max-width: 1024px)" sppc-grid-column="Project.code">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('code')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column width="150" media="(min-width: 450px) and (max-width: 1024px)" sppc-grid-column="Project.fullCode">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('fullCode')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-command-column *ngIf="insertAccess" width="75" media="(min-width: 450px) and (max-width: 1024px)" title="{{ 'Buttons.New' | translate }}">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <button kendoGridAddCommand (click)="addNew(dataItem.id)" type="button">{{ 'Buttons.New' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-command-column *ngIf="editAccess" media="(min-width: 450px) and (max-width: 1024px)" title="{{ 'Buttons.Edit' | translate }}">
                <ng-template kendoGridCellTemplate>
                    <button kendoGridEditCommand class="k-primary">{{ 'Buttons.Edit' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-command-column *ngIf="deleteAccess" media="(min-width: 450px) and (max-width: 1024px)" title="{{ 'Buttons.Delete' | translate }}  ">
                <ng-template kendoGridCellTemplate>
                    <button kendoGridRemoveCommand>{{ 'Buttons.Delete' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <!-- template for mid-size devices -->
            <!-- additional columns on large devices -->
            <kendo-grid-checkbox-column showSelectAll="true" width="10" media="(min-width: 1024px)"></kendo-grid-checkbox-column>
            <kendo-grid-column media="(min-width: 1024px)" width="150" sppc-grid-column="Project.name">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('name')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column media="(min-width: 1024px)" width="150" sppc-grid-column="Project.code">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('code')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column media="(min-width: 1024px)" width="150" sppc-grid-column="Project.fullCode">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('fullCode')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-column media="(min-width: 1024px)" width="190" sppc-grid-column="Project.description">
                <ng-template kendoGridFilterCellTemplate let-filter let-column="column">
                    <sppc-grid-filter [metaData]="getMeta('description')" [column]="column" [filter]="filter"></sppc-grid-filter>
                </ng-template>
            </kendo-grid-column>

            <kendo-grid-command-column *ngIf="insertAccess" width="75" media="(min-width: 1024px)" title="{{ 'Buttons.New' | translate }}">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <button kendoGridAddCommand (click)="addNew(dataItem.id)" type="button">{{ 'Buttons.New' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-command-column *ngIf="editAccess" media="(min-width: 1024px)" width="70" title="{{ 'Buttons.Edit' | translate }}">
                <ng-template kendoGridCellTemplate>
                    <button kendoGridEditCommand class="k-primary">{{ 'Buttons.Edit' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-command-column *ngIf="deleteAccess" media="(min-width: 1024px)" width="70" title="{{ 'Buttons.Delete' | translate }}  ">
                <ng-template kendoGridCellTemplate>
                    <button kendoGridRemoveCommand>{{ 'Buttons.Delete' | translate }}</button>
                </ng-template>
            </kendo-grid-command-column>
            <!-- additional columns on large devices -->

        </kendo-grid>
        <project-form-component [model]="editDataItem" [isNew]="isNew" [errorMessage]="errorMessage"
                                      (save)="saveHandler($event)"
                                      (cancel)="cancelHandler()">
        </project-form-component>
    </div>
    <kendo-dialog title="{{'Project.Delete' | translate}}" *ngIf="deleteConfirm" (close)="deleteProject(false)" [minWidth]="250" [width]="450">
        <p>
            {{ deleteConfirmMsg }}
        </p>
        <kendo-dialog-actions>
            <button class="k-button" (click)="deleteProject(true)" primary="true">{{ 'Buttons.Yes' | translate }}</button>
            <button class="k-button" (click)="deleteProject(false)">{{ 'Buttons.No' | translate }}</button>
        </kendo-dialog-actions>
    </kendo-dialog>
    <kendo-dialog title="{{'Project.Delete' | translate}}" *ngIf="deleteProjectsConfirm" (close)="deleteProjects(false)" [minWidth]="250" [width]="450">
        <p>
            {{ this.deleteConfirmMsg }}
        </p>
        <kendo-dialog-actions>
            <button class="k-button" (click)="deleteProjects(true)" primary="true">{{ 'Buttons.Yes' | translate }}</button>
            <button class="k-button" (click)="deleteProjects(false)">{{ 'Buttons.No' | translate }}</button>
        </kendo-dialog-actions>
    </kendo-dialog>
</div>




